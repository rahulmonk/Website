<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Richard Davis - Portfolio</title>
    <!-- Styles are identical, so they are omitted for brevity -->
    <style>:root{--outer-bg:#1a1a1d;--window-bg:#252528;--content-bg:#363639;--sidebar-bg:#2c2c2f;--border-color:#4a4a4d;--text-primary:#e0e0e0;--text-secondary:#a0a0a0;--text-hover:#fff;--accent-active:#404043;--btn-red:#ff5f56;--btn-yellow:#ffbd2e;--btn-green:#27c93f;--icon-color:#9e9e9e} @import url(https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap); *{margin:0;padding:0;box-sizing:border-box} body{font-family:'Inter',sans-serif;background-color:var(--outer-bg);color:var(--text-primary);display:flex;justify-content:center;align-items:center;height:100vh;padding:1rem;overflow:hidden} #canvas-container{position:fixed;top:0;left:0;width:100%;height:100%;display:none;z-index:10} #drawing-canvas{display:block;width:100%;height:100%;cursor:crosshair} #canvas-ui{position:absolute;top:30px;left:50%;transform:translateX(-50%);z-index:15;display:flex;flex-direction:column;align-items:center;gap:15px;color:var(--text-secondary)} #canvas-ui h2{font-weight:500;color:var(--text-hover)} #screenshot-btn{background:var(--sidebar-bg);border:1px solid var(--border-color);color:var(--text-hover);padding:10px;border-radius:8px;cursor:pointer;display:flex;align-items:center;gap:8px;transition:background-color .2s ease} #screenshot-btn:hover{background:var(--accent-active)} #screenshot-btn svg{width:20px;height:20px} #closed-message{display:none;font-size:2rem;font-weight:600;color:var(--text-hover);text-align:center;position:relative;z-index:20} #dock{position:fixed;bottom:-80px;left:50%;transform:translateX(-50%);background-color:var(--sidebar-bg);padding:10px 20px;border-radius:12px 12px 0 0;box-shadow:0 -10px 30px rgba(0,0,0,.3);border:1px solid var(--border-color);border-bottom:none;cursor:pointer;display:flex;align-items:center;gap:10px;transition:bottom .4s cubic-bezier(.25,1,.5,1);z-index:1001} #dock.visible{bottom:0} #dock img{width:24px;height:24px;border-radius:50%} #dock span{font-weight:500} .window-container{width:100%;max-width:1200px;height:90vh;max-height:800px;background-color:var(--window-bg);border-radius:12px;box-shadow:0 25px 50px -12px rgba(0,0,0,.5);display:flex;flex-direction:column;overflow:hidden;border:1px solid var(--border-color);position:relative;z-index:100;transition:all .4s cubic-bezier(.25,1,.5,1);opacity:1;transform:scale(1)} .window-container.hidden{opacity:0;transform:scale(.95);pointer-events:none} .window-container.maximized{width:100vw;height:100vh;max-width:100vw;max-height:100vh;border-radius:0;top:0;left:0} .window-container.minimized{transform:scale(.8) translateY(120vh);opacity:0;pointer-events:none} .title-bar{display:flex;justify-content:space-between;align-items:center;padding:12px;background-color:var(--sidebar-bg);border-bottom:1px solid var(--border-color);flex-shrink:0;position:relative} .hamburger-menu{display:none;cursor:pointer;padding:5px} .hamburger-menu svg{width:24px;height:24px;color:var(--icon-color)} .window-controls{display:flex;gap:8px;position:absolute;left:12px;top:50%;transform:translateY(-50%)} .control-btn{width:14px;height:14px;border-radius:50%;cursor:pointer;transition:transform .2s ease} .control-btn:hover{transform:scale(1.15)} .close{background-color:var(--btn-red)} .minimize{background-color:var(--btn-yellow)} .maximize{background-color:var(--btn-green)} .user-info{display:flex;align-items:center;gap:12px;position:absolute;left:50%;transform:translateX(-50%)} .user-info img{width:28px;height:28px;border-radius:50%;border:2px solid var(--border-color)} .user-info span{font-weight:500} .current-thought{color:var(--text-secondary);font-size:.9rem;margin-left:auto} .main-content{display:flex;flex-grow:1;overflow:hidden;position:relative} .sidebar{width:220px;background-color:var(--sidebar-bg);padding:20px 12px;display:flex;flex-direction:column;border-right:1px solid var(--border-color);flex-shrink:0;transition:transform .3s ease} .sidebar h3{font-size:.8rem;color:var(--text-secondary);text-transform:uppercase;letter-spacing:.5px;padding:0 12px 12px} .nav-item{display:flex;align-items:center;gap:12px;padding:10px 12px;border-radius:6px;text-decoration:none;color:var(--text-secondary);font-weight:500;font-size:.95rem;transition:background-color .2s ease,color .2s ease;cursor:pointer} .nav-item svg{width:20px;height:20px;flex-shrink:0} .nav-item:hover{background-color:var(--accent-active);color:var(--text-hover)} .nav-item.active{background-color:var(--content-bg);color:var(--text-primary)} .sidebar .contact{margin-top:auto} .content-pane{flex-grow:1;padding:20px 30px;background-color:var(--content-bg);display:flex;flex-direction:column;overflow-y:auto} .breadcrumbs{font-size:.9rem;color:var(--text-secondary);margin-bottom:24px} .breadcrumbs span{color:var(--text-primary)} .article-list{width:100%;border-spacing:0} .article-list th,.article-list td{text-align:left;padding:16px 12px;border-bottom:1px solid var(--border-color);font-size:.9rem} .article-list th{color:var(--text-secondary);font-weight:500} .article-item a{color:var(--text-primary);text-decoration:none;display:flex;align-items:center;gap:16px;transition:color .2s ease} .article-item a:hover{color:var(--text-hover)} .article-item svg{width:20px;height:20px;flex-shrink:0;color:var(--icon-color)} .article-item .category,.article-item .date{color:var(--text-secondary)} .content-pane.grid-view .article-list{display:grid;grid-template-columns:repeat(auto-fill,minmax(180px,1fr));gap:20px} .content-pane.grid-view .article-list thead{display:none} .content-pane.grid-view .article-list tbody,.content-pane.grid-view .article-list tr{display:contents} .content-pane.grid-view .article-list td{display:block;border:none;padding:0} .content-pane.grid-view .article-item a{flex-direction:column;align-items:flex-start;gap:12px;padding:16px;background:var(--sidebar-bg);border-radius:8px;height:100%;border:1px solid transparent;transition:background-color .2s ease,border-color .2s ease} .content-pane.grid-view .article-item a:hover{background-color:var(--accent-active);border-color:var(--border-color)} .content-pane.grid-view .article-item svg{width:32px;height:32px;color:var(--text-hover)} .content-pane.grid-view .article-list .category,.content-pane.grid-view .article-list .date{display:none} .page-content h2{margin-bottom:20px;font-weight:600} .page-content p{color:var(--text-secondary);line-height:1.6;max-width:70ch} .projects-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(250px,1fr));gap:20px} .project-card{background:var(--sidebar-bg);border-radius:8px;padding:20px;border:1px solid var(--border-color);transition:transform .2s ease,box-shadow .2s ease;text-decoration:none;display:block} .project-card:hover{transform:translateY(-5px);box-shadow:0 10px 20px rgba(0,0,0,.2)} .project-card h3{color:var(--text-primary);margin-bottom:10px} .project-card p{color:var(--text-secondary)} .footer{display:flex;justify-content:space-between;align-items:center;padding:12px 20px;background-color:var(--sidebar-bg);border-top:1px solid var(--border-color);flex-shrink:0} .footer-left,.footer-right{display:flex;align-items:center;gap:16px} .footer .view-toggle{display:flex;gap:8px;background-color:var(--content-bg);padding:4px;border-radius:6px} .footer svg{width:22px;height:22px;color:var(--icon-color);cursor:pointer;transition:color .2s ease,transform .2s ease;padding:4px;border-radius:4px} .footer svg:hover{color:var(--text-hover)} .footer .view-toggle svg.active{background-color:var(--accent-active);color:var(--text-hover)} @media (max-width:768px){body{padding:0;align-items:flex-start} .window-container,.window-container.maximized{width:100vw;height:100vh;max-width:100vw;max-height:100vh;border-radius:0;border:none;box-shadow:none} .title-bar{justify-content:flex-start} .hamburger-menu{display:block;position:absolute;z-index:1001;right:12px;top:50%;transform:translateY(-50%)} .user-info span{display:none} .current-thought{display:none} .sidebar{position:absolute;left:0;top:0;height:100%;z-index:1000;transform:translateX(-100%);border-right:1px solid var(--border-color)} .sidebar.open{transform:translateX(0)} .content-pane{padding:15px} .content-pane .article-list,.content-pane.grid-view .article-list{display:block} .content-pane .article-list thead{display:none} .content-pane .article-list tbody,.content-pane .article-list tr{display:block} .content-pane .article-list tr{margin-bottom:15px} .content-pane .article-list td{display:block;padding:0;border:none} .content-pane .article-list .article-item a,.content-pane.grid-view .article-item a{flex-direction:row;background-color:var(--sidebar-bg);padding:15px;border-radius:8px;align-items:center;gap:15px;flex-wrap:wrap} .content-pane .article-list .article-item svg,.content-pane.grid-view .article-item svg{width:24px;height:24px} .article-list .article-name{width:100%;font-weight:500;color:var(--text-primary)} .content-pane .article-list .category,.content-pane .article-list .date{display:inline-block;width:auto;font-size:.8rem;padding:4px 8px;background:var(--accent-active);border-radius:4px;color:var(--text-secondary);margin-top:8px} .content-pane .article-list .date{margin-left:8px}}</style>
</head>
<body>
    <div id="closed-message">keep thinking, keep building</div>
    
    <div id="canvas-container">
        <div id="canvas-ui">
            <h2>draw your thoughts</h2>
            <button id="screenshot-btn">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"></path><circle cx="12" cy="13" r="4"></circle></svg>
                <span>Save</span>
            </button>
        </div>
        <canvas id="drawing-canvas"></canvas>
    </div>

    <div id="dock">
        <img src="/assets/images/avatar.png" alt="User Avatar">
        <span>Richard Davis</span>
    </div>

    <div class="window-container">
        <header class="title-bar">
            <div class="window-controls">
                <div class="control-btn close"></div>
                <div class="control-btn minimize"></div>
                <div class="control-btn maximize"></div>
            </div>
            <div class="user-info">
                 <img src="/assets/images/avatar.png" alt="User Avatar">
                <span>Richard Davis</span>
            </div>
            <div class="current-thought">current thought</div>
             <div class="hamburger-menu">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg>
            </div>
        </header>

        <div class="main-content">
            <nav class="sidebar">
                <h3>Folders</h3>
                <div id="nav-projects" class="nav-item">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"></path></svg>
                    <span>Projects</span>
                </div>
                <div id="nav-thoughts" class="nav-item active">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"></path></svg>
                    <span>Thoughts</span>
                </div>
                
                <div class="contact">
                    <div id="nav-about" class="nav-item">
                       <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="16" x2="12" y2="12"></line><line x1="12" y1="8" x2="12.01" y2="8"></line></svg>
                        <span>About</span>
                    </div>
                    <a href="mailto:richard.davis@example.com" class="nav-item">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path><polyline points="22,6 12,13 2,6"></polyline></svg>
                        <span>Email Me</span>
                    </a>
                </div>
            </nav>

            <main class="content-pane"></main>
        </div>

        <footer class="footer">
            <div class="footer-left">
                 <div class="view-toggle">
                    <svg id="view-list" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="active"><line x1="8" y1="6" x2="21" y2="6"></line><line x1="8" y1="12" x2="21" y2="12"></line><line x1="8" y1="18" x2="21" y2="18"></line><line x1="3" y1="6" x2="3.01" y2="6"></line><line x1="3" y1="12" x2="3.01" y2="12"></line><line x1="3" y1="18" x2="3.01" y2="18"></line></svg>
                    <svg id="view-grid" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="3" width="7" height="7"></rect><rect x="14" y="3" width="7" height="7"></rect><rect x="14" y="14" width="7" height="7"></rect><rect x="3" y="14" width="7" height="7"></rect></svg>
                 </div>
            </div>
            <div class="footer-right">
                <a href="https://linkedin.com" target="_blank" rel="noopener noreferrer">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-linkedin"><path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"></path><rect x="2" y="9" width="4" height="12"></rect><circle cx="4" cy="4" r="2"></circle></svg>
                </a>
            </div>
        </footer>
    </div>
    
    <template id="thoughts-template">
        <div class="breadcrumbs">Home → <span>Articles</span></div>
        <table class="article-list">
            <thead><tr><th>Name</th><th>Category</th><th>Date</th></tr></thead>
            <tbody>
                {% for post in posts %}
                <tr class="article-item">
                    <td>
                        <a href="{{ post.href }}">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline></svg>
                            <span class="article-name">{{ post.title }}</span>
                        </a>
                    </td>
                    <td class="category">{{ post.category }}</td>
                    <td class="date">{{ post.date }}</td>
                </tr>
                {% else %}
                <tr><td colspan="3" style="text-align: center; padding: 20px; color: var(--text-secondary);">No thoughts written yet.</td></tr>
                {% endfor %}
            </tbody>
        </table>
    </template>

    <template id="projects-template">
        <div class="breadcrumbs">Home → <span>Projects</span></div>
        <div class="page-content">
            <h2>My Work</h2>
            <p>Here are some of the projects I've worked on, showcasing my skills in web development and design.</p>
            <br>
            <div class="projects-grid">
                {% for project in projects %}
                <a href="{{ project.href }}" class="project-card">
                    <h3>{{ project.title }}</h3>
                    <p>{{ project.content | striptags | truncate(100) }}</p>
                </a>
                {% else %}
                <p>No projects listed yet.</p>
                {% endfor %}
            </div>
        </div>
    </template>

    <template id="about-template">
        <div class="breadcrumbs">Home → <span>About Me</span></div>
        <div class="page-content">
            <h2>About Richard Davis</h2>
            <p>I am a passionate developer with a knack for creating beautiful, functional, and user-centered digital experiences. With a background in both design and development, I bridge the gap between aesthetics and technology.</p>
        </div>
    </template>

    <script>
    document.addEventListener('DOMContentLoaded', () => {
        const windowContainer = document.querySelector('.window-container');
        const maximizeBtn = document.querySelector('.control-btn.maximize');
        const minimizeBtn = document.querySelector('.control-btn.minimize');
        const closeBtn = document.querySelector('.control-btn.close');
        const hamburgerMenu = document.querySelector('.hamburger-menu');
        const sidebar = document.querySelector('.sidebar');
        const contentPane = document.querySelector('.content-pane');
        const viewToggleContainer = document.querySelector('.view-toggle');
        const closedMessage = document.getElementById('closed-message');
        const dock = document.getElementById('dock');
        const canvasContainer = document.getElementById('canvas-container');
        const canvas = document.getElementById('drawing-canvas');
        const screenshotBtn = document.getElementById('screenshot-btn');
        const ctx = canvas.getContext('2d');
        let isDrawing = false;
        
        const navItems = {
            projects: document.getElementById('nav-projects'),
            thoughts: document.getElementById('nav-thoughts'),
            about: document.getElementById('nav-about'),
        };

        function showPage(pageId) {
            contentPane.innerHTML = '';
            const template = document.getElementById(`${pageId}-template`);
            if (template) {
                contentPane.appendChild(template.content.cloneNode(true));
            }
            Object.values(navItems).forEach(item => item.classList.remove('active'));
            if(navItems[pageId]) navItems[pageId].classList.add('active');
            viewToggleContainer.style.display = (pageId === 'thoughts' || pageId === 'projects') ? 'flex' : 'none';
            contentPane.classList.remove('grid-view');
            const viewListBtn = document.getElementById('view-list');
            if (viewListBtn) viewListBtn.classList.add('active');
        };

        navItems.projects.addEventListener('click', () => showPage('projects'));
        navItems.thoughts.addEventListener('click', () => showPage('thoughts'));
        navItems.about.addEventListener('click', () => showPage('about'));

        function handleInitialView() {
            const params = new URLSearchParams(window.location.search);
            const view = params.get('view') || 'thoughts';
            showPage(view);
        }

        function setupUI() {
            maximizeBtn.addEventListener('click', () => windowContainer.classList.toggle('maximized'));
            minimizeBtn.addEventListener('click', () => { windowContainer.classList.add('minimized'); dock.classList.add('visible'); canvasContainer.style.display = 'block'; });
            dock.addEventListener('click', () => { windowContainer.classList.remove('minimized'); dock.classList.remove('visible'); canvasContainer.style.display = 'none'; clearCanvas(); });
            closeBtn.addEventListener('click', () => { windowContainer.classList.add('hidden'); closedMessage.style.display = 'block'; dock.classList.remove('visible'); canvasContainer.style.display = 'none'; });
            hamburgerMenu.addEventListener('click', (e) => { e.stopPropagation(); sidebar.classList.toggle('open'); });
            document.addEventListener('click', (e) => { if (sidebar.classList.contains('open') && !sidebar.contains(e.target) && !hamburgerMenu.contains(e.target)) { sidebar.classList.remove('open'); } });
            
            const viewListBtn = document.getElementById('view-list');
            const viewGridBtn = document.getElementById('view-grid');
            if(viewListBtn && viewGridBtn){
                viewListBtn.addEventListener('click', () => { if (contentPane.classList.contains('grid-view')) { contentPane.classList.remove('grid-view'); viewListBtn.classList.add('active'); viewGridBtn.classList.remove('active'); } });
                viewGridBtn.addEventListener('click', () => { if (!contentPane.classList.contains('grid-view')) { contentPane.classList.add('grid-view'); viewGridBtn.classList.add('active'); viewListBtn.classList.remove('active'); } });
            }
            
            // --- RESTORED: JSON Fetch for Current Thought ---
            // This path is now root-relative so it works from any page on the hosted site.
            fetch('/assets/js/thoughts.json')
                .then(response => {
                    if (!response.ok) throw new Error('Network response was not ok');
                    return response.json();
                })
                .then(data => {
                    const thoughts = data.thoughts;
                    if (thoughts && thoughts.length > 0) {
                        const randomThought = thoughts[Math.floor(Math.random() * thoughts.length)];
                        document.querySelector('.current-thought').textContent = randomThought;
                    }
                })
                .catch(error => {
                    console.error('Error fetching thoughts:', error);
                    document.querySelector('.current-thought').textContent = 'create freely';
                });

            // Canvas setup
            resizeCanvas();
            window.addEventListener('resize', resizeCanvas);
            canvas.addEventListener('mousedown', startDrawing);
            canvas.addEventListener('mousemove', draw);
            canvas.addEventListener('mouseup', stopDrawing);
            canvas.addEventListener('mouseout', stopDrawing);
            canvas.addEventListener('touchstart', startDrawing, { passive: false });
            canvas.addEventListener('touchmove', draw, { passive: false });
            canvas.addEventListener('touchend', stopDrawing);
            screenshotBtn.addEventListener('click', () => {
                const tempCanvas = document.createElement('canvas'); const tempCtx = tempCanvas.getContext('2d');
                tempCanvas.width = canvas.width; tempCanvas.height = canvas.height;
                tempCtx.fillStyle = getComputedStyle(document.body).getPropertyValue('--outer-bg').trim();
                tempCtx.fillRect(0, 0, tempCanvas.width, tempCanvas.height);
                tempCtx.drawImage(canvas, 0, 0);
                const link = document.createElement('a'); link.download = 'my-thought.jpg'; link.href = tempCanvas.toDataURL('image/jpeg', 0.9); link.click();
            });
        }
        
        function resizeCanvas() { canvas.width = window.innerWidth; canvas.height = window.innerHeight; ctx.strokeStyle = '#FFFFFF'; ctx.lineWidth = 3; ctx.lineCap = 'round'; }
        function getMousePos(evt) { const rect = canvas.getBoundingClientRect(); const clientX = evt.clientX || evt.touches[0].clientX; const clientY = evt.clientY || evt.touches[0].clientY; return { x: clientX - rect.left, y: clientY - rect.top }; }
        function startDrawing(e) { e.preventDefault(); isDrawing = true; const pos = getMousePos(e); ctx.beginPath(); ctx.moveTo(pos.x, pos.y); }
        function draw(e) { e.preventDefault(); if (!isDrawing) return; const pos = getMousePos(e); ctx.lineTo(pos.x, pos.y); ctx.stroke(); }
        function stopDrawing(e) { e.preventDefault(); isDrawing = false; }
        function clearCanvas() { ctx.clearRect(0, 0, canvas.width, canvas.height); }

        setupUI();
        handleInitialView();
    });
    </script>
</body>
</html>
